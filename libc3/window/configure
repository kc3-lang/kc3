#!/bin/sh
## c3
## Copyright 2022,2023 kmx.io <contact@kmx.io>
##
## Permission is hereby granted to use this software granted the above
## copyright notice and this permission paragraph are included in all
## copies and substantial portions of this software.
##
## THIS SOFTWARE IS PROVIDED "AS-IS" WITHOUT ANY GUARANTEE OF
## PURPOSE AND PERFORMANCE. IN NO EVENT WHATSOEVER SHALL THE
## AUTHOR BE CONSIDERED LIABLE FOR THE USE AND PERFORMANCE OF
## THIS SOFTWARE.

set -e

export SRC_TOP="$(dirname "$PWD")"

. ../../config.subr

if pkg-config cairo; then
    HAVE_CAIRO=true
    if pkg-config xcb; then
        HAVE_XCB=true
        ( cd cairo/xcb && ./configure; )
        ( cd cairo/xcb/demo && ./configure; )
    else
        HAVE_XCB=false
    fi
else
    HAVE_CAIRO=false
fi

echo "HAVE_CAIRO = $HAVE_CAIRO" >> ${CONFIG_MK}
echo "HAVE_XCB = $HAVE_XCB" >> ${CONFIG_MK}

update_config_mk
