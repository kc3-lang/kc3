#!/bin/sh

set -e

ARCH="aarch64-linux-android31"
TOOLCHAIN="/opt/android-sdk/ndk/latest/toolchains/llvm/prebuilt/linux-x86_64"

export  CC="${TOOLCHAIN}/bin/${ARCH}-clang"
export CXX="${TOOLCHAIN}/bin/${ARCH}-clang++"
export  LD="${TOOLCHAIN}/bin/ld"

export PREFIX="/home/dx/kpkg/arch/${ARCH}/local"
export CPPFLAGS="-I${PREFIX}/include"
export  LDFLAGS="-L${PREFIX}/lib --ld-path=${LD}"

export PKG_CONFIG_LIBDIR="${PREFIX}/lib/pkgconfig"

PKG="$1"; shift

./bin/kpkg "$PKG" --arch ${ARCH} "$@"
