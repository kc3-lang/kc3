defmodule HTTP.Event do

  dlopen(__DIR__ + "../http.so")

  def add = cfn S32 "http_event_add" (Ptr, Time)

  # base_set(base, ev)
  def base_set = cfn S32 "event_base_set" (Ptr, Ptr)

  def del = cfn S32 "event_del" (Ptr)

  def dispatch = cfn S32 "event_base_dispatch" (Ptr)

  # init() returns a (struct event_base *)
  def event_base_new = cfn Ptr "event_base_new" ()

  def new = cfn Ptr "http_event_new" (Ptr, S32, List, Fn, Tag)

  def version = cfn Str "http_event_version" (Result)

end
