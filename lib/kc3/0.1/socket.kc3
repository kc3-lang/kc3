defmodule Socket do

  defstruct [fd: (S32) -1]

  dlopen(__DIR__ + "http.so")

  def accept = cfn Socket "socket_init_accept" (Result, Socket)

  def close = cfn Void "socket_close" (Socket)

  def connect = cfn Socket.Buf "socket_buf_init_connect" (Result, Str, Str)

  def listen = cfn Socket "socket_init_listen" (Result, Str, Str)

end
