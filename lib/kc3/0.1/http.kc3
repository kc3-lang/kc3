defmodule Socket do

  defstruct [fd: (S32) 0]

  dlopen(__DIR__ + "http.so")

  def accept = cfn Socket "socket_init_accept" (Result, Socket)

  def close = cfn Void "socket_close" (Socket)

  # listen(host, port)
  def listen = cfn Socket "socket_init_listen" (Result, Str, U16)

end
